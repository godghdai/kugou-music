{
    "version": 3,
    "sources": [
        "..\\..\\src\\controller\\song.js"
    ],
    "names": [
        "Base",
        "require",
        "fetch",
        "module",
        "exports",
        "indexAction",
        "result",
        "cache",
        "getHtml",
        "$",
        "data",
        "each",
        "i",
        "elem",
        "item",
        "url",
        "attr",
        "img",
        "find",
        "id",
        "title",
        "text",
        "trim",
        "success",
        "topAction",
        "topDetailAction",
        "get",
        "num",
        "order",
        "playListAction",
        "playcount",
        "playListDetailAction",
        "classAction",
        "sub",
        "subIndex",
        "subElem",
        "sub_item",
        "push",
        "singerListAction",
        "singerAction",
        "console",
        "log",
        "searchAction",
        "encodeURIComponent",
        "headers",
        "then",
        "res",
        "json",
        "hotKeyWordAction"
    ],
    "mappings": "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",
    "file": "..\\..\\src\\controller\\song.js",
    "sourcesContent": [
        "const Base = require('./base.js');\nconst fetch = require('node-fetch');\n\nmodule.exports = class extends Base {\n\n  async indexAction() {\n\n    const result = await this.cache(\"http://m.kugou.com/\", () => {\n      return this.getHtml(\"http://m.kugou.com/\", function($) {\n        let data = {\n          \"banners\": [],\n          \"songs\": []\n        };\n        $('.swipe-wrap a').each(function(i, elem) {\n          let item = $(this);\n          data[\"banners\"][i] = {\n            url: item.attr(\"href\"),\n            img: item.find(\"img\").attr(\"src\")\n          };\n        });\n\n        $('.panel-songslist-item').each(function(i, elem) {\n          let item = $(this);\n          data[\"songs\"][i] = {\n            id: item.attr(\"id\"),\n            title: item.find(\".panel-songs-item-name\").text().trim()\n          };\n        });\n        return data;\n      });\n    });\n\n    return this.success(result);\n  }\n\n  async topAction() {\n\n    const result = await this.cache(\"http://m.kugou.com/rank/list\", () => {\n      return this.getHtml(\"http://m.kugou.com/rank/list\", function($) {\n        let data = []\n        $('.panel-img-list li').each(function(i, elem) {\n          let item = $(this);\n          data[i] = {\n            url: item.find(\"a\").attr(\"href\"),\n            img: item.find(\".panel-img-left img\").attr(\"_src\"),\n            title: item.find(\".panel-img-content\").text().trim()\n          };\n        });\n        return data;\n      });\n    });\n\n    return this.success(result);\n  }\n\n  async topDetailAction() {\n    let url = this.get(\"url\") || \"http://m.kugou.com/rank/info/6666\";\n    var result = await this.getHtml(url, function($) {\n      let data = {\n        \"title\": $(\".page-title\").text().trim(),\n        \"img\": $(\".rank-info-hd img\").attr(\"src\"),\n        \"time\": $(\".rank-info-hd .rank-info-time\").text().trim(),\n        \"songs\": []\n      };\n      $('.panel-songslist-item').each(function(i, elem) {\n        let item = $(this);\n        data[\"songs\"][i] = {\n          id: item.attr(\"id\"),\n          num: item.find(\".panel-songs-item-num\").text().trim(),\n          title: item.find(\".panel-songs-item-name\").text().trim(),\n          order: item.find(\".panel-songs-item-num\").text().trim()\n        };\n      });\n      return data;\n    });\n    return this.success(result);\n  }\n\n  async playListAction() {\n\n    const result = await this.cache(\"http://m.kugou.com/plist/index\", () => {\n      return this.getHtml(\"http://m.kugou.com/plist/index\", function($) {\n        let data = [];\n        $('.panel-img-list li').each(function(i, elem) {\n          let item = $(this);\n          data[i] = {\n            url: item.find(\"a\").attr(\"href\"),\n            img: item.find(\".panel-img-left img\").attr(\"_src\"),\n            title: item.find(\".panel-img-content-first\").text().trim(),\n            playcount: item.find(\".panel-img-content-sub\").text().trim()\n          };\n        });\n        return data;\n      });\n    });\n    return this.success(result);\n  }\n\n  async playListDetailAction() {\n    let url = this.get(\"url\") || \"http://m.kugou.com/plist/list/191005\";\n    var result = await this.getHtml(url, function($) {\n      let data = {\n        \"img\": $(\"#imgBoxInfo img\").attr(\"src\"),\n        \"title\": $(\".page-title\").text().trim(),\n        \"detail\": $(\"#introBox\").text().trim(),\n        \"songs\": []\n      };\n      $('.panel-songslist-item').each(function(i, elem) {\n        let item = $(this);\n        data[\"songs\"][i] = {\n          id: item.attr(\"id\"),\n          title: item.find(\".panel-songs-item-name\").text().trim()\n        };\n      });\n      return data;\n    });\n    return this.success(result);\n  }\n\n  async classAction() {\n\n    const result = await this.cache(\"http://m.kugou.com/singer/class\", () => {\n      return this.getHtml(\"http://m.kugou.com/singer/class\", function($) {\n        let data = [];\n        let sub;\n        $('.singer-class-list').each(function(i, elem) {\n          sub = [];\n          let item = $(this);\n          item.find(\"li a\").each(function(subIndex, subElem) {\n            let sub_item = $(this);\n            sub.push({\n              id: sub_item.attr(\"href\"),\n              title: sub_item.text().trim()\n            });\n          });\n          data.push(sub);\n        });\n        return data;\n      });\n    });\n    return this.success(result);\n  }\n\n  async singerListAction() {\n    let url = this.get(\"url\") || \"http://m.kugou.com/singer/list/88\";\n    var result = await this.getHtml(url, function($) {\n      let data = {\n        \"title\": $(\".page-title\").text().trim(),\n        \"singers\": []\n      };\n      $('.singer-img-list li').each(function(i, elem) {\n        let item = $(this);\n        data[\"singers\"][i] = {\n          url: item.find(\"a\").attr(\"href\"),\n          img: item.find(\"a img\").attr(\"_src\"),\n          title: item.find(\".panel-img-content-first\").text().trim()\n        };\n\n      });\n      return data;\n    });\n    return this.success(result);\n  }\n\n\n  async singerAction() {\n\n    console.log(this.get(\"url\"));\n\n    var result = await this.getHtml(\"http://m.kugou.com/singer/info/3060\", function($) {\n      let data = {\n        \"img\": $(\"#imgBoxInfo img\").attr(\"src\"),\n        \"title\": $(\".page-title\").text().trim(),\n        \"detail\": $(\"#introBox\").text().trim(),\n        \"songs\": []\n      };\n      $('.panel-songslist li').each(function(i, elem) {\n        let item = $(this);\n        data[\"songs\"][i] = {\n          id: item.attr(\"id\"),\n          title: item.find(\".panel-songs-item-name\").text().trim()\n        };\n      });\n      return data;\n    });\n    return this.success(result);\n  }\n\n  async searchAction() {\n    let url=`http://mobilecdn.kugou.com/api/v3/search/song?format=json&keyword=${encodeURIComponent(this.get(\"keyword\"))}&page=1&pagesize=30&showtype=1`;\n    console.log(url)\n    var result = await fetch(url, {\n        headers: {\n            \"User-Agent\": \"Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1\"\n        }\n    }).then(function(res) {\n        return res.text();\n    });\n    return this.json(result);\n  }\n\n  async hotKeyWordAction() {\n    var result = await fetch(\"http://mobilecdn.kugou.com/api/v3/search/hot?format=json&plat=0&count=30\", {\n        headers: {\n            \"User-Agent\": \"Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1\"\n        }\n    }).then(function(res) {\n        return res.text();\n    });\n    return this.json(result);\n  }\n\n\n};\n"
    ]
}